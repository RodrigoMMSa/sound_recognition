#:kivy 1.11.1
#:import Factory kivy.factory.Factory

<Graphics>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            font_size: 70
            text: "Welcome"

        GridLayout:
            cols: 2
            Button:
                font_size: 50
                text: "View"
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 0.5
                    root.manager.current = "working"
                background_normal: ''
                background_color: .1, .1, .8, .85
            Button:
                id: start
                font_size: 50
                text: "START"
                on_press:
                    root.manager.transition.direction = "left"
                    root.manager.transition.duration = 1
                    root.manager.get_screen('working').ids.stop.disabled = False
                    root.manager.current = "loading"
                    self.disabled = True
                background_normal: ''
                background_color: 1, .3, .4, .85

<Loading>:
    on_enter:
        root.start_program(app.police, app.view)
        root.manager.transition.direction = "left"
        root.manager.transition.duration = 1
        root.manager.current = "working"
    BoxLayout:
        Label:
            font_size: 70
            text: "Initializing ..."



<Working>:
    on_enter:
        root.run_program(app.police, app.view)
        root.change_text()
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            size_hint: (1 , .4)
            cols: 2
            Button:
                font_size: 30
                text: "Go back"
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 0.5
                    root.manager.current = "graphics"
                background_normal: ''
                background_color: .1, .1, .8, .85

            Button:
                id: stop
                font_size: 30
                text: "STOP"
                disabled: True
                on_press:
                    root.manager.transition.direction = "right"
                    root.manager.transition.duration = 1
                    self.disabled = True
                    root.stop_program()
                    root.manager.get_screen('graphics').ids.start.disabled = False
                    root.manager.current = "graphics"
        BoxLayout:
            Label:
                font_size: 40
                text: root.sound_text

<Working2>:
    on_enter:
        root.manager.transition.duration = 0.1
        root.manager.current = "working"